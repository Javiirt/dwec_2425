<!DOCTYPE html>
<html>

<head>
    <script>

        var getSetFigura = (function () {//Creamos closure para almacenar las variables
            figura = [0, 0, 0]; //Almacenamos las 3 variables en un array, 
            //0 -> figura
            //1 -> altura
            //2 -> radio

            var fun = function (valoresEntrada) {

                if (valoresEntrada == undefined) { 
                    //Si recibe undefined, devolvemos el objeto actual
                    return figura;


                } else if ((valoresEntrada[0] >= 1 && valoresEntrada[0] <= 3) && valoresEntrada[1] == 0 && valoresEntrada[2] == 0) {
                    /*Si solo recibe el primer valor, significa que ha introducido una nueva figura.
                    Asignamos el valor de la nueva figura y reseteamos altura y radio */

                    figura[0] = valoresEntrada[0];
                    figura[1] = 0;
                    figura[2] = 0;

                } else if (valoresEntrada[0] == 0 && (valoresEntrada[1] != 0 || valoresEntrada[2] != 0)) {
                    /*Si recibe la altura o el radio, le asignamos los nuevos valores*/
                    figura[1] = valoresEntrada[1];
                    figura[2] = valoresEntrada[2];
                }

            }
            return fun;
        })();


        function setForma() { //Pedimos que introduzca una forma
            let forma = parseInt(prompt("Elige entre: \n1. Cubo\n2. Esfera\n3. Cilindro."));
            return forma;
        }


        function setValores(forma) { //Según la forma introducida, pedimos unos valores u otros
            let valores = [];

            switch (forma) {
                case 1:
                    valores[0] = parseFloat(prompt("Introduzca la altura del cubo (cm)."));
                    break;
                case 2:
                    valores[1] = parseFloat(prompt("Introduzca el radio de la esfera (cm)."));
                    break;
                case 3:
                    valores[0] = parseFloat(prompt("Introduzca la altura del cilindro (cm)."));
                    valores[1] = parseFloat(prompt("Introduzca el radio del cilindro (cm)."));
                    break;
                default:
                    alert("Primeros debes seleccionar una figura.");
                    break;
            }

            return valores; //Devolvemos los valores en forma de array
        }

        function getVolumen(forma, altura, radio) {
            switch (forma) {//Según el tipo de figura, calculamos el volumen de forma diferente
                case 1:
                    if (altura > 0) {
                        alert("El volumen de cubo es de " + (altura * altura * altura).toFixed(2) + " cm^3");
                    } else {
                        alert("Primeros debes introducir todos los valores.");
                    }
                    break;

                case 2:
                    if (radio > 0) {
                        alert("El volumen de la esfera es de " + ((4 / 3) * Math.PI * radio * radio * radio).toFixed(2) + " cm^3");
                    } else {
                        alert("Primeros debes introducir todos los valores.");
                    }
                    break;

                case 3:
                    if (altura > 0 && radio > 0) {
                        alert("El volumen del cilindro es de " + (Math.PI * radio * radio * altura).toFixed(2) + " cm^3");
                    } else {
                        alert("Primeros debes introducir todos los valores.");
                    }
                    break;

                default:
                    alert("Primeros debes introducir todos los valores.");
                    break;
            }
        }

        function getArea(forma, altura, radio) {
            switch (forma) {//Según el tipo de figura, calculamos el área de forma diferente
                case 1:
                    if (altura > 0) {
                        alert("El área de cubo es de " + (6 * altura * altura).toFixed(2) + " cm^2");
                    } else {
                        alert("Primeros debes introducir todos los valores.");
                    }
                    break;

                case 2:
                    if (radio > 0) {
                        alert("El área de la esfera es de " + (4 * Math.PI * radio * radio).toFixed(2) + " cm^2");
                    } else {
                        alert("Primeros debes introducir todos los valores.");
                    }

                    break;

                case 3:
                    if (altura > 0 && radio > 0) {
                        alert("El área del cilindro es de " + ((2 * Math.PI * radio * altura) + (2 * Math.PI * radio * radio)).toFixed(2) + " cm^2");
                    } else {
                        alert("Primeros debes introducir todos los valores.");
                    }
                    break;

                default:
                    alert("Primeros debes introducir todos los valores.");
                    break;
            }
        }


        (function menu() { //Accedemos a la función menú 
            let respuesta;

            do {//Pedimos que seleccione una opción hasta que elija salir
                respuesta = prompt("Elige una opcion: \n1. Elija entre cubo, esfera o cilindro. \n2. Introduzca los valores de las variables.\n3. Calculo del volumen.\n4. Calculo del area.\n5. Finalizar");

                switch (respuesta) {
                    case "1"://Llamamos a una funcion para pedir la forma de la figura
                        let forma = setForma();
                        let valoresCase1 = [forma, 0, 0];
                        getSetFigura(valoresCase1);
                        break;

                    case "2"://Llamamos a una función para pedir los valores de la figura  
                        let valoresCase2 = getSetFigura();                      
                        let valoresRecibidos = setValores(valoresCase2[0]);                        
                        let valores2 = [0, valoresRecibidos[0], valoresRecibidos[1]];
                        getSetFigura(valores2);
                        break;

                    case "3"://Llamamos a una función para ver el volumen de la figura
                        var figura = getSetFigura();
                        getVolumen(figura[0], figura[1], figura[2]);
                        break;

                    case "4"://Llamamos a una función para ver el área de la figura
                        var figura = getSetFigura();
                        getArea(figura[0], figura[1], figura[2]);
                        break;

                    default:
                        break;

                }


            } while (respuesta != "5" && respuesta != null);//Cuando introduzca un 5 sale

        })();

    </script>


</head>

<body>
</body>

</html>